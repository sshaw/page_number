module PageNumber
  VERSION = "0.1.0".freeze

  def page(n)
    n = __int(n)
    return default_page if n < 1

    max_page_number && n > max_page_number ? max_page_number : n
  end

  alias :__page__ :page

  def per_page(n)
    n = __int(n)
    return default_per_page if n < 1

    page_sizes && !page_sizes.include?(n) ? default_per_page : n
  end

  alias :__per_page__ :per_page

  protected

  def default_per_page
    10
  end

  def default_page
    1
  end

  def max_page_number
  end

  def page_sizes
  end

  private

  def __int(n)
    case
    when n.respond_to?(:to_i)
      n.to_i
    when n.respond_to?(:to_int)
      n.to_int
    else
      -1
    end
  end
end
